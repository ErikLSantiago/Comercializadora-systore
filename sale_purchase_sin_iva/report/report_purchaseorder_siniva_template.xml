<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <template id="report_purchaseorder_siniva">
    <t t-call="web.html_container">
      <t t-foreach="docs" t-as="o">
        <t t-call="web.external_layout">
          <div class="page">
            <h2>Orden de Compra (Sin IVA)</h2>
            <table class="table table-sm o_main_table mt16">
              <thead>
                <tr>
                  <th>Producto</th>
                  <th class="text-end">Cantidad</th>
                  <th class="text-end">Sin IVA</th>
                  <th class="text-end">Total sin IVA</th>
                </tr>
              </thead>
              <tbody>
                <tr t-foreach="o.order_line" t-as="l">
                  <td><span t-field="l.name"/></td>
                  <td class="text-end"><span t-field="l.product_qty"/></td>
                  <td class="text-end">
                    <span t-field="l.sin_iva_price_unit" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                  </td>
                  <td class="text-end">
                    <span t-field="l.sin_iva_price_subtotal" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="row mt16">
              <div class="col-7"/>
              <div class="col-5">
                <table class="table table-sm o_subtotal_table">
                  <tr>
                    <td>Subtotal</td>
                    <td class="text-end">
                      <span t-field="o.amount_subtotal_sin_iva" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                    </td>
                  </tr>
                  <tr>
                    <td>IVA (16%)</td>
                    <td class="text-end">
                      <span t-field="o.amount_tax_sin_iva" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                    </td>
                  </tr>
                  <tr>
                    <td><strong>Total</strong></td>
                    <td class="text-end">
                      <strong>
                        <span t-field="o.amount_total_sin_iva" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
                      </strong>
                    </td>
                  </tr>
                </table>
              </div>
            </div>

          </div>
        </t>
      </t>
    </t>
  </template>
</odoo>
