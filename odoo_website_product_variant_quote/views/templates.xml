<?xml version="1.0" encoding="utf-8"?>
<odoo>

    
    <template id="quote_cart_header_cart_link" inherit_id="website_sale.header_cart_link" name="Header Cart Link">
        <xpath expr="//li[2]" position="after">
            <t t-set="cart_qty" t-value="website.sudo().get_qty()"/>
            <t t-if="cart_qty">
                <li class="nav-item divider d-none"/>
                <li class="nav-item">
                    <a href="/quote/cart" class="nav-link">
                        <i class="fa fa-shopping-cart"></i>
                        Quote Cart
                        <sup t-attf-class="my_cart_quantity badge badge-primary" t-esc="cart_qty" style="color: #FFFFFF !important;
    background-color: RGBA(52.88345865, 150.81578947, 155.51654135, var(bg-opacity, 1)) !important;"/>
                    </a>
                </li>
            </t>
        </xpath>
    </template>




 <template id="get_quotation_in_single_product_page" inherit_id="website_sale.product" active="True"
              customize_show="True" name="Show Get Quotation">
      

        <xpath expr="//div[@id='add_to_cart_wrap']" position="replace">
        <t t-esc="product.quote_products"/>
                  <t t-if="product.quote_products">
                        <div id="add_to_cart_wrap" t-attf-class="{{'d-none' if combination_info['prevent_zero_price_sale'] else 'd-inline-flex'}} align-items-center mb-2 me-auto">
                            <a role="button" id="add_to_cart_quote"
                               t-att-disabled="product.quote_products and 'disabled'"
                               class="btn btn-primary btn-md mt8 js_check_product a-submit"
                               href="#">Add to Cart
                            </a>
                            <a id="request_quote"
                               t-att-disabled="product.quote_products and 'disabled'"
                               style="background-color: #337ab7 !important; border: 1px solid white !important;"
                               class="btn btn-primary btn-md mt8 request_quote_btn" href="#">Add to Quote
                            </a>
                        </div>
                  </t>
                 
                  <t t-else="">
                    <div id="add_to_cart_wrap" t-attf-class="{{'d-none' if combination_info['prevent_zero_price_sale'] else 'd-inline-flex'}} align-items-center mb-2 me-auto">
                                            <a data-animation-selector=".o_wsale_product_images" role="button" id="add_to_cart" t-attf-class="btn btn-primary js_check_product a-submit flex-grow-1" href="#">
                                                <i class="fa fa-shopping-cart me-2"/>
                                                Add to cart
                                            </a>
                                        </div>

                  </t>
               </xpath>
    </template> 
    
    <template id="product_all_product" inherit_id="website_sale.product">
        <xpath expr="//ol[hasclass('breadcrumb')]/li[1]" position="replace">
            <t t-set="url" t-value="request.httprequest.headers.get('Referer')"/>
            <t t-if="url">
                <t t-set="url_final" t-value="url.split('/')[3:]"/>
                <t t-if="url_final">
                    <t t-if="url_final==['quote']">
                        <li class="breadcrumb-item o_not_editable">
                        <a href="/quote">All Product</a>
                        </li>
                    </t>
                    <t t-else="">
                        <li class="breadcrumb-item o_not_editable">
                        <a href="/shop">All Products</a>
                        </li>
                    </t>
                </t>
            </t>
            <t t-else="">
                <li class="breadcrumb-item o_not_editable">
                <a href="/shop">All Products</a>
                </li>
            </t>
        </xpath>
    </template>

    <template id="products_item1" name="Products item" inherit_id="website_sale.products_item" active="True" customize_show="True">
        <xpath expr="//div[hasclass('product_price')]" position="replace">
            <t t-if="product.quote_products">
                
            </t>
            
            <t t-else="">
                <div class="product_price" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">
                        <t t-if="'base_price' in template_price_vals and (template_price_vals['base_price'] &gt; template_price_vals['price_reduce']) and (template_price_vals['price_reduce'] or not website.prevent_zero_price_sale)">
                            <del t-attf-class="text-muted me-1 h6 mb-0" style="white-space: nowrap;">
                                <em class="small" t-esc="template_price_vals['base_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />
                            </del>
                        </t>
                        <span class="h6 mb-0" t-if="template_price_vals['price_reduce'] or not website.prevent_zero_price_sale" t-esc="template_price_vals['price_reduce']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                        <span class="h6 mb-0" t-else="" t-field="website.prevent_zero_price_sale_text"/>
                        <span itemprop="price" style="display:none;" t-esc="template_price_vals['price_reduce']" />
                        <span itemprop="priceCurrency" style="display:none;" t-esc="website.currency_id.name" />
                    </div>
            </t>
        </xpath>
    </template>

    <template id="quote_cart" name="Quote Cart">
        <t t-call="website.layout">
            <div id="wrap">
                <h3 class="mt32 mb32 text-center">
                    Request a Quote
                </h3>
                <div class="container container-fluid mt32 mb32 oe_website_sale py-2">
                    <div class="row">
                        <div class="col-12 oe_cart">
                            <div class="row">
                                <div class="col-lg-12">
                                    <t t-call="odoo_website_product_variant_quote.qoute_cart_lines"/>
                                    <div class="clearfix"/>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <t t-if="website.user_id != user_id">
                                <div class="d-flex justify-content-between row" style="display:block;">
                                    <a role="button" class="btn btn-primary col-auto ml-2" href="/quote">
                                        <span class="fa fa-chevron-left"/>
                                        <span class="">Continue</span>
                                    </a>
                                    <t t-set="website_product" t-value="website.get_quote_cart_products()"/>
                                    <a role="button" class="btn btn-primary col-auto float-right mr-2" href="/process/quote"
                                       id="btn_cart" t-if="website_product">
                                        <span class="">Process Checkout</span>
                                        <span class="fa fa-chevron-right"/>
                                    </a>
                                    <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                                </div>
                            </t>
                            <t t-if="website.user_id == user_id">
                                <div class="d-flex justify-content-between row" style="display:block;">
                                    <a role="button" class="btn btn-primary col-auto ml-2" href="/quote">
                                        <span class="fa fa-chevron-left"/>
                                        <span class="">Continue</span>
                                    </a>
                                    <t t-set="website_product" t-value="website.get_quote_cart_products()"/>
                                    <a role="button" class="btn btn-primary col-auto float-right mr-2"
                                       href="/quote/product/selected/nonlogin" id="btn_cart" t-if="website_product">
                                        <span class="">Process Checkout</span>
                                        <span class="fa fa-chevron-right"/>
                                    </a>
                                    <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
                <div class="oe_structure" id="oe_structure_website_sale_cart_2"/>
            </div>
        </t>
    </template>

    <template id="qoute_cart_lines" name="Quote Cart Lines">
        <t t-set="website_product" t-value="website.get_quote_cart_products()"/>
        <div t-if="not website_product" class="alert alert-info">
            Your cart is empty!
        </div>
        <table class="mb16 table table-striped table-sm" id="tbl" t-if="website_product">
            <thead>
                <tr>
                    <th></th>
                    <th class="td-img">Product</th>
                    <th class="text-center td-qty">Quantity</th>
                    <th class="text-center td-action"></th>
                </tr>
            </thead>
            <tbody id="tb_body">
                <t t-foreach="website.get_quote_cart_products()" t-as="line">
                    <tr t-att-class="'optional_product info' if line.id else None ">
                        <td colspan="2" t-if="not line.product_id.product_tmpl_id" class='td-img'></td>
                        <td align="center" t-if="line.product_id.product_tmpl_id" class='td-img'>
                            <span t-field="line.product_id.image_128"
                                  t-options="{'widget': 'image', 'class': 'rounded o_image_64_max'}"/>
                        </td>
                        <td t-if="line.product_id" class='td-product_name' id="prod">
                            <div>
                                <!-- <t t-call="website_sale.cart_line_product_link">  -->
                                    <!-- <strong t-field="line.product_id.display_name"/> -->
                                    <a t-att-href="line.product_id.website_url">
                                        <t t-out="0"/>
                                        <strong t-field="line.product_id.display_name" />
                                        <input type="hidden" class="product_id" name="product_id_id" t-att-value="line.product_id.id"/>
                                    </a>
                                <!-- </t>  -->
                            </div>
                        </td>
                        <td class="text-center td-qty">

                            <div class="css_quantity input-group" id="txt" t-att-line_id="line.id"
                                 contenteditable="false" style="    justify-content: center;">
                                <div class="input-group-prepend">
                                    <a t-attf-href="#" class="btn btn-link js_add_cart_json" aria-label="Remove one"
                                       title="Remove one">
                                        <i class="fa fa-minus"></i>
                                    </a>
                                </div>
                                <input type="text" id="add_qty" class="form-control text-center  quantity"
                                       t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id"
                                       t-att-value="int(line.qty)"/>
                                <div class="input-group-append">
                                    <a t-attf-href="#" class="btn btn-link float_left js_add_cart_json"
                                       aria-label="Add one" title="Add one">
                                        <i class="fa fa-plus"></i>
                                    </a>
                                </div>
                            </div>
                        </td>
                        <td class="td-action">
                            <a t-attf-href='/quote/delete/#{slug(line)}' title="Remove from cart" class='no-decoration'>
                                <small>
                                    <i class='fa fa-trash-o'></i>
                                </small>
                            </a>
                        </td>
                    </tr>
                </t>
            </tbody>
        </table>

    </template>

    <!-- quote_request_page page -->

    <template id="quote" name="Website Product Quote Request">
        <t t-call="website.layout">
            <div class="container container-fluid">
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="mt32 mb32 text-center">
                            Request a Quote
                        </h3>
                        <div class="row mt32 mb32 col-sm-12 ">
                            <t t-set="website_product" t-value="website.get_quote_products()"/>
                            <t t-foreach="website_product" t-as="product">
                                <div class="col-sm-3 d-flex align-items-end text-center"
                                     style="border: 1px solid rgba(100, 100, 100, 0.2);padding: 10px;"
                                     id="quote_method">
                                    <div style="width: 100%;">
                                        <div class="oe_product_image">
                                            <a t-attf-href="/shop/product/#{slug(product)}" tabindex="-1">
                                                <img class="product-image-photo default_image"
                                                     t-att-src="website.image_url(product, 'image_256', None if product_image_big else '200x200')"
                                                     alt=""/>
                                            </a>
                                        </div>
                                        <div class="product details text-center product-item-details">
                                            <strong class="product name product-item-name">
                                                <a class="product-item-link"
                                                   t-attf-href="/shop/product/#{slug(product)}">
                                                    <span t-field="product.name"/>
                                                </a>
                                            </strong>
                                            <div class="product-item-inner" style="margin-top: 10px;">
                                                <div class="product actions">
                                                    <a href="#" class="btn btn-primary" title="Wish List"
                                                       aria-label="Wish List"
                                                       data-action="add-to-wishlist" role="button"
                                                       style="display: none;">
                                                        <i class="fa fa-heart" aria-hidden="true"></i>
                                                        <span>Wish List</span>
                                                    </a>
                                                
                                                    <t t-if="len(product.product_variant_ids) == 1">
                                                        <div style="text-align: center;">
                                                            <t t-set="product_variant_id"
                                                               t-value="product._get_first_possible_variant_id()"/>
                                                            <a id="request_quote"
                                                               class="btn btn-primary mt8 request_quote_btn"
                                                               t-att-href="'/quote/product/selected/%s?product_variant=%s' %(product_variant_id,product_variant_id)">
                                                                Add to Quote
                                                            </a>
                                                        </div>
                                                    </t>
                                                    <t t-else="">
                                                        <div style="text-align: center;">
                                                            <a class="btn btn-primary mt8"
                                                               style="background-color: #337ab7 !important; border: 1px solid white !important;"
                                                               t-attf-href="/shop/product/#{slug(product)}">Add to Quote
                                                            </a>
                                                        </div>
                                                    </t>

                                                    


                                                    <a href="#" class="action actions-secondary" title="Compare"
                                                       aria-label="Compare"
                                                       role="button"
                                                       style="visibility: visible;
											position: static;
											opacity: 1;
											height: 40px;
											line-height: 40px;
											top: 0;
											width: 40px;
											border: 0;
											background-color: #e6e6e6;
											color: #000; display: none;">
                                                        <i class="fa fa-signal" aria-hidden="true"></i>
                                                        <span>Compare</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>


    <!-- Get Quotation Request Page -->

    <template id="get_quotation_request" name="Get Quotation Request">
        <t t-call="website.layout">
            <t t-set="additional_title">Quote - Request</t>
            <div id="wrap">
                <div class="container container-fluid oe_website_sale">
                    <h3 class="mt32 mb32 text-center">
                        Quote - Request
                    </h3>
                    <t t-if="website.user_id == user_id">
                        <form class="mb32" t-attf-action="/process/quote/nonlogin" method="post">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <div class="row">
                                <div class="col-lg-12 oe_cart">
                                    <div class="row o_portal_details">
                                        <div class="col-md-12">
                                            <div t-if="error_message" class="alert alert-danger">
                                                <t t-foreach="error_message" t-as="err">
                                                    <t t-esc="err"/>
                                                    <br/>
                                                </t>
                                            </div>
                                        </div>
                                        <div t-attf-class="form-group  col-sm-12 #{error and 'name' in error and 'has-error' or ''}">
                                            <label class="col-form-label" for="name">Your Name</label>
                                            <div>
                                                <input type="text" class="form-control" name="name" required="True"/>
                                            </div>
                                        </div>
                                        <br/>
                                        <br/>
                                        <div t-attf-class="form-group  col-sm-6 #{error and 'email' in error and 'has-error' or ''}">
                                            <label class="col-form-label" for="email">Email</label>
                                            <div>
                                                <input type="email" required="True" name="email" class="form-control"/>
                                            </div>
                                        </div>
                                        <br/>
                                        <br/>
                                        <div t-attf-class="form-group col-sm-6 #{error and 'phone' in error and 'has-error' or ''}">
                                            <label class="col-form-label" for="phone">Phone</label>
                                            <div>
                                                <input type="text" required="True" name="phone" class="form-control"/>
                                            </div>
                                        </div>
                                        <br/>
                                        <br/>
                                        <div t-attf-class="form-group col-sm-6 div_street">
                                            <label class="col-form-label" for="street">Street</label>
                                            <div>
                                                <input type="text" required="True" name="street" class="form-control"/>
                                            </div>
                                        </div>
                                        <br/>
                                        <br/>
                                        <div t-attf-class="form-group col-md-6 div_city">
                                            <label class="col-form-label" for="city">City</label>
                                            <div>
                                                <input type="text" required="True" name="city" class="form-control"/>
                                            </div>
                                        </div>
                                        <br/>
                                        <br/>
                                        <div t-attf-class="form-group col-md-6 div_city">
                                            <label class="col-form-label" for="zip">Zip</label>
                                            <div>
                                                <input type="text" required="True" name="zip" class="form-control"/>
                                            </div>
                                        </div>
                                        <br/>
                                        <br/>
                                        <div t-attf-class="form-group  col-lg-6 div_country">
                                            <label class="col-form-label" for="country_id">Country</label>
                                            <select id="country_id" name="country_id" t-attf-class="form-control">
                                                <option value="">Country...</option>
                                                <t t-foreach="countries" t-as="c">
                                                    <option t-att-value="c.id"
                                                            t-att-selected="c.id == (country and country.id or -1)">
                                                        <t t-esc="c.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <br/>
                                        <br/>
                                        <div id="state" t-attf-class="form-group col-lg-6">
                                            <label class="control-label" for="state_id">State / Province</label>
                                            <select name="state_id" class="form-control">
                                                <option value="">select...</option>
                                                <t t-foreach="states or []" t-as="state">
                                                    <option t-att-value="state.id"
                                                            t-att-data-country_id="state.country_id.id">
                                                        <t t-esc="state.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <br/>
                                        <br/>
                                    </div>
                                    <div class="d-flex justify-content-between row" style="display:contents">
                                        <a href="/quote/cart" role="button" class="btn btn-primary ml-2 col-auto">
                                            <span class="fa fa-chevron-left"/>
                                            <span class="">Return to cart</span>
                                        </a>
                                        <button type="submit" class="btn btn-primary float-right mr-2 col-auto"
                                                onclick="submit();">
                                            <span>Next</span>
                                            <span class="fa fa-chevron-right"/>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </t>
                </div>
            </div>
        </t>
    </template>

    <template id="get_billing" name="Get Quotation Billing">
        <t t-call="website.layout">
            <t t-set="additional_title">Quote - Request</t>
            <div id="wrap">
                <div class="container container-fluid oe_website_sale">
                    <h3 class="mt32 mb32 text-center">
                        Quote - Request
                    </h3>
                    <div class="col-12 mb32 col-xl order-xl-1 oe_cart">
                        <div class="card">
                            <div class="card-body" id="shipping_and_billing">
                                <div>
                                    <b>Billing</b>
                                    <span t-esc='order.partner_id'
                                          t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                                          class="address-inline"/>
                                </div>
                            </div>
                        </div>
                        <br/>
                        <t t-if="website.user_id != user_id">
                            <div class="d-flex justify-content-between row" style="display:block">
                                <a role="button" class="btn btn-primary ml-2 col-auto" href="/quote/cart">
                                    <span class="fa fa-chevron-left"/>
                                    <span class="">Continue</span>
                                </a>
                                <a role="button" class="btn btn-primary float-right mr-2 col-auto"
                                   href="/shop/product/quote/confirm" id="btn_final">
                                    <span class="">Submit Quote</span>
                                    <span class="fa fa-chevron-right"/>
                                </a>
                            </div>
                        </t>

                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Quote Thank You page -->

    <template id="quote_thankyou" name="Quote Thank You">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure"/>
                <div class="container container-fluid mt32 mb16">
                    <h1>Thank you!</h1>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="alert alert-success">
                                Thank you for your Quotation Request...!!! Our Sales Team Will Get Back to you
                                soon...!!!
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </div>
        </t>
    </template>

</odoo>
